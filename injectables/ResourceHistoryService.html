<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>cc-ui documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avaoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);

               if ($darkModeToggles.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">cc-ui documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >ResourceHistoryService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/resource-history.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#artifactTableSettings" >artifactTableSettings</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#blueprintTableSettings" >blueprintTableSettings</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#configurationTableSettings" >configurationTableSettings</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#loadingResourceHistory" >loadingResourceHistory</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getFormattedHistoryData" >getFormattedHistoryData</a>
                            </li>
                            <li>
                                <a href="#getResourceHistoryDataToRender" >getResourceHistoryDataToRender</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getStackDetailsByName" >getStackDetailsByName</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getStatus" >getStatus</a>
                            </li>
                            <li>
                                <a href="#makeResourceHistoryAPI" >makeResourceHistoryAPI</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#openTab" >openTab</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(uiApplicationControllerService: <a href="../injectables/UiApplicationControllerService.html" target="_self">UiApplicationControllerService</a>, uiStackControllerService: <a href="../injectables/UiStackControllerService.html" target="_self">UiStackControllerService</a>, resourceDetailsService: <a href="../injectables/ResourceDetailsService.html" target="_self">ResourceDetailsService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="194" class="link-to-prism">src/app/services/resource-history.service.ts:194</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>uiApplicationControllerService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/UiApplicationControllerService.html" target="_self" >UiApplicationControllerService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>uiStackControllerService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/UiStackControllerService.html" target="_self" >UiStackControllerService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>resourceDetailsService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ResourceDetailsService.html" target="_self" >ResourceDetailsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFormattedHistoryData"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getFormattedHistoryData</b></span>
                        <a href="#getFormattedHistoryData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getFormattedHistoryData(response, stackDetails)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="280"
                                    class="link-to-prism">src/app/services/resource-history.service.ts:280</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>response</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>stackDetails</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>{ artifactData: any; blueprintData: any; overrideData: any; resourceStatus: any; }</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getResourceHistoryDataToRender"></a>
                    <span class="name">
                        <span ><b>getResourceHistoryDataToRender</b></span>
                        <a href="#getResourceHistoryDataToRender"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getResourceHistoryDataToRender(undefined)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="202"
                                    class="link-to-prism">src/app/services/resource-history.service.ts:202</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStackDetailsByName"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getStackDetailsByName</b></span>
                        <a href="#getStackDetailsByName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getStackDetailsByName(undefined)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="411"
                                    class="link-to-prism">src/app/services/resource-history.service.ts:411</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStatus"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getStatus</b></span>
                        <a href="#getStatus"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getStatus(undefined)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="376"
                                    class="link-to-prism">src/app/services/resource-history.service.ts:376</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>&quot;&quot; | &quot;live&quot; | &quot;preview&quot; | &quot;queued&quot;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="makeResourceHistoryAPI"></a>
                    <span class="name">
                        <span ><b>makeResourceHistoryAPI</b></span>
                        <a href="#makeResourceHistoryAPI"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>makeResourceHistoryAPI(undefined: literal type)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="252"
                                    class="link-to-prism">src/app/services/resource-history.service.ts:252</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="openTab"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>openTab</b></span>
                        <a href="#openTab"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>openTab(rowData)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="424"
                                    class="link-to-prism">src/app/services/resource-history.service.ts:424</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>rowData</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="artifactTableSettings"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>artifactTableSettings</b></span>
                        <a href="#artifactTableSettings"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
    actions: false,
    columns: {
      version: {
        title: &#x27;Version&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;15%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            textContent: cell,
            showNbIcon: true,
            showIcon: true,
            nbIconPack: &#x27;fci&#x27;,
            nbIconLink: iconAndTextMap[row.state]?.icon || null,
            toolTipText: iconAndTextMap[row.state]?.text || null,
            imgClass: iconAndTextMap[row.state]?.iconClass || null,
            iconStatus: iconAndTextMap[row.state]?.status || null,
            iconFontSize: iconAndTextMap[row.state]?.iconFontSize || null,
          });
        },
        renderComponent: SmartTableWithIconComponent,
      },
      applicationName: {
        title: &#x27;Artifact Name&#x27;,
        filter: false,
      },
      buildId: {
        title: &#x27;Build Id&#x27;,
        filter: false,
      },
      lastModifiedBy: {
        title: &#x27;Modified By&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;20%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            user: row?.lastModifiedBy,
            label: row?.lastModifiedDate,
          });
        },
        renderComponent: SmartTableTimeagoTooltipComponent,
      },
      artifactUri: {
        title: &#x27;Artifact URI&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            uri: cell,
          });
        },
        renderComponent: ArtifactUriComponent,
      },
    },
  }</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="50" class="link-to-prism">src/app/services/resource-history.service.ts:50</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="blueprintTableSettings"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>blueprintTableSettings</b></span>
                        <a href="#blueprintTableSettings"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
    actions: false,
    columns: {
      commitId: {
        title: &#x27;Commit Id&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;15%&#x27;,
        valuePrepareFunction: (value, row, cell) &#x3D;&gt; {
          return JSON.stringify({
            display: value?.slice(0, 7),
            showImg: false,
            isRouterLink: true,
            iconName: iconAndTextMap[row.state]?.icon || null,
            iconTooltip: iconAndTextMap[row.state]?.text || null,
            iconStatus: iconAndTextMap[row.state]?.status || null,
            iconFontSize: iconAndTextMap[row.state]?.iconFontSize || null,
            iconClass: iconAndTextMap[row.state]?.iconClass || null,
          });
        },
        renderComponent: SmartTableLinkComponent,
        onComponentInitFunction: (instance) &#x3D;&gt; {
          instance?.byLinkClick?.subscribe((data) &#x3D;&gt; {
            this.openTab(data);
          });
        },
      },
      authorName: {
        title: &#x27;Committed By&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;20%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            user: row?.authorName,
            label: row?.commitDate,
          });
        },
        renderComponent: SmartTableTimeagoTooltipComponent,
      },
      commitMessage: {
        title: &#x27;Commit Message&#x27;,
        filter: false,
      },
    },
  }</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="149" class="link-to-prism">src/app/services/resource-history.service.ts:149</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="configurationTableSettings"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>configurationTableSettings</b></span>
                        <a href="#configurationTableSettings"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
    actions: false,
    columns: {
      version: {
        title: &#x27;Version&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;15%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            textContent: cell,
            showNbIcon: true,
            showIcon: true,
            nbIconPack: &#x27;fci&#x27;,
            nbIconLink: iconAndTextMap[row.state]?.icon || null,
            toolTipText: iconAndTextMap[row.state]?.text || null,
            iconStatus: iconAndTextMap[row.state]?.status || null,
            iconFontSize: iconAndTextMap[row.state]?.iconFontSize || null,
            imgClass: iconAndTextMap[row.state]?.iconClass || null,
          });
        },
        renderComponent: SmartTableWithIconComponent,
      },
      lastModifiedBy: {
        title: &#x27;Modified By&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;20%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            user: row?.lastModifiedBy,
            label: row?.lastModifiedDate,
          });
        },
        renderComponent: SmartTableTimeagoTooltipComponent,
      },
      changeLog: {
        title: &#x27;Comments&#x27;,
        filter: false,
      },
    },
  }</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="107" class="link-to-prism">src/app/services/resource-history.service.ts:107</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadingResourceHistory"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>loadingResourceHistory</b></span>
                        <a href="#loadingResourceHistory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/app/services/resource-history.service.ts:48</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { SmartTableWithIconComponent } from &#x27;../components/smart-table-with-icon/smart-table-with-icon.component&#x27;;
import { SmartTableTimeagoTooltipComponent } from &#x27;../components/smart-table-timeago-tooltip/smart-table-timeago-tooltip.component&#x27;;
import { SmartTableLinkComponent } from &#x27;../pages/cluster-pages/cluster-releases-new-v2/smart-table-link-component&#x27;;
import {
  UiApplicationControllerService,
  UiStackControllerService,
} from &#x27;src/app/cc-api/services&#x27;;
import { ResourceHistory } from &#x27;../cc-api/models&#x27;;
import cloneDeep from &#x27;lodash/cloneDeep&#x27;;
import { ArtifactUriComponent } from &#x27;../components/artifact-uri/artifact-uri.component&#x27;;
import { getCommitUrl } from &#x27;../git-utils&#x27;;
import { ResourceDetailsService } from &#x27;../pages/resource-center/resource-details.service&#x27;;

const queuedIcon &#x3D; &#x27;./assets/clock.svg&#x27;;
const liveIcon &#x3D; &#x27;./assets/pulse.svg&#x27;;
const doubleRightArrow &#x3D; &#x27;./double-right-arrow.svg&#x27;;

const iconAndTextMap &#x3D; {
  live: {
    img: liveIcon,
    text: &#x27;Live&#x27;,
    icon: &#x27;pulse&#x27;,
    status: &#x27;success&#x27;,
    iconFontSize: &#x27;10px&#x27;,
  },
  queued: {
    img: queuedIcon,
    text: &#x27;Release pending&#x27;,
    icon: &#x27;clock&#x27;,
    status: &#x27;danger&#x27;,
    iconFontSize: &#x27;15px&#x27;,
  },
  preview: {
    img: doubleRightArrow,
    text: &#x27;Preview&#x27;,
    icon: &#x27;double-right-arrow&#x27;,
    status: &#x27;primary&#x27;,
    iconFontSize: &#x27;10px&#x27;,
    iconClass: &#x27;preview-version-icon&#x27;,
  },
};

@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class ResourceHistoryService {
  private loadingResourceHistory: boolean &#x3D; false;

  private artifactTableSettings &#x3D; {
    actions: false,
    columns: {
      version: {
        title: &#x27;Version&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;15%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            textContent: cell,
            showNbIcon: true,
            showIcon: true,
            nbIconPack: &#x27;fci&#x27;,
            nbIconLink: iconAndTextMap[row.state]?.icon || null,
            toolTipText: iconAndTextMap[row.state]?.text || null,
            imgClass: iconAndTextMap[row.state]?.iconClass || null,
            iconStatus: iconAndTextMap[row.state]?.status || null,
            iconFontSize: iconAndTextMap[row.state]?.iconFontSize || null,
          });
        },
        renderComponent: SmartTableWithIconComponent,
      },
      applicationName: {
        title: &#x27;Artifact Name&#x27;,
        filter: false,
      },
      buildId: {
        title: &#x27;Build Id&#x27;,
        filter: false,
      },
      lastModifiedBy: {
        title: &#x27;Modified By&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;20%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            user: row?.lastModifiedBy,
            label: row?.lastModifiedDate,
          });
        },
        renderComponent: SmartTableTimeagoTooltipComponent,
      },
      artifactUri: {
        title: &#x27;Artifact URI&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            uri: cell,
          });
        },
        renderComponent: ArtifactUriComponent,
      },
    },
  };
  private configurationTableSettings &#x3D; {
    actions: false,
    columns: {
      version: {
        title: &#x27;Version&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;15%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            textContent: cell,
            showNbIcon: true,
            showIcon: true,
            nbIconPack: &#x27;fci&#x27;,
            nbIconLink: iconAndTextMap[row.state]?.icon || null,
            toolTipText: iconAndTextMap[row.state]?.text || null,
            iconStatus: iconAndTextMap[row.state]?.status || null,
            iconFontSize: iconAndTextMap[row.state]?.iconFontSize || null,
            imgClass: iconAndTextMap[row.state]?.iconClass || null,
          });
        },
        renderComponent: SmartTableWithIconComponent,
      },
      lastModifiedBy: {
        title: &#x27;Modified By&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;20%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            user: row?.lastModifiedBy,
            label: row?.lastModifiedDate,
          });
        },
        renderComponent: SmartTableTimeagoTooltipComponent,
      },
      changeLog: {
        title: &#x27;Comments&#x27;,
        filter: false,
      },
    },
  };
  private blueprintTableSettings &#x3D; {
    actions: false,
    columns: {
      commitId: {
        title: &#x27;Commit Id&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;15%&#x27;,
        valuePrepareFunction: (value, row, cell) &#x3D;&gt; {
          return JSON.stringify({
            display: value?.slice(0, 7),
            showImg: false,
            isRouterLink: true,
            iconName: iconAndTextMap[row.state]?.icon || null,
            iconTooltip: iconAndTextMap[row.state]?.text || null,
            iconStatus: iconAndTextMap[row.state]?.status || null,
            iconFontSize: iconAndTextMap[row.state]?.iconFontSize || null,
            iconClass: iconAndTextMap[row.state]?.iconClass || null,
          });
        },
        renderComponent: SmartTableLinkComponent,
        onComponentInitFunction: (instance) &#x3D;&gt; {
          instance?.byLinkClick?.subscribe((data) &#x3D;&gt; {
            this.openTab(data);
          });
        },
      },
      authorName: {
        title: &#x27;Committed By&#x27;,
        filter: false,
        type: &#x27;custom&#x27;,
        width: &#x27;20%&#x27;,
        valuePrepareFunction: (cell, row) &#x3D;&gt; {
          return JSON.stringify({
            user: row?.authorName,
            label: row?.commitDate,
          });
        },
        renderComponent: SmartTableTimeagoTooltipComponent,
      },
      commitMessage: {
        title: &#x27;Commit Message&#x27;,
        filter: false,
      },
    },
  };

  constructor(
    private uiApplicationControllerService: UiApplicationControllerService,
    private uiStackControllerService: UiStackControllerService,
    private resourceDetailsService: ResourceDetailsService,
  ) {}

  getResourceHistoryDataToRender({ requestParams, includeBlueprintHistory }) {
    const promises &#x3D; [this.makeResourceHistoryAPI(requestParams)];

    if (includeBlueprintHistory) {
      promises.push(this.getStackDetailsByName(requestParams));
    }

    return new Promise((resolve, reject) &#x3D;&gt; {
      Promise.allSettled(promises).then(
        ([resourceHistoryPromiseData, stackDetailsPromiseData]) &#x3D;&gt; {
          if (resourceHistoryPromiseData.status &#x3D;&#x3D;&#x3D; &#x27;fulfilled&#x27;) {
            const stackDetails &#x3D;
              stackDetailsPromiseData?.status &#x3D;&#x3D;&#x3D; &#x27;fulfilled&#x27;
                ? stackDetailsPromiseData?.value
                : null;

            const {
              artifactData,
              overrideData,
              blueprintData,
              resourceStatus,
            } &#x3D; this.getFormattedHistoryData(
              resourceHistoryPromiseData?.value,
              stackDetails,
            );
            resolve({
              historyResourceStatus: (resourceHistoryPromiseData?.value as any)
                ?.resourceStatus,
              loadingResourceHistory: this.loadingResourceHistory,
              artifactProps: {
                tableSettings: cloneDeep(this.artifactTableSettings),
                historyData: cloneDeep(artifactData),
              },
              overrideProps: {
                tableSettings: cloneDeep(this.configurationTableSettings),
                historyData: cloneDeep(overrideData),
              },
              blueprintProps: {
                tableSettings: cloneDeep(this.blueprintTableSettings),
                historyData: cloneDeep(blueprintData),
              },
              resourceStatus: resourceStatus,
            });
          } else {
            reject(resourceHistoryPromiseData.reason);
          }
        },
      );
    });
  }
  makeResourceHistoryAPI({
    clusterId,
    resourceType,
    resourceName,
  }: {
    clusterId: string;
    resourceType: string;
    resourceName: string;
  }) {
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.uiApplicationControllerService
        .getResourceHistoryUsingGET({
          clusterId: clusterId,
          resourceType: resourceType,
          resourceName: resourceName,
        })
        .subscribe(
          (response: ResourceHistory) &#x3D;&gt; {
            this.loadingResourceHistory &#x3D; false;
            resolve(response);
          },
          (error) &#x3D;&gt; {
            reject(error);
          },
        );
    });
  }

  private getFormattedHistoryData(response, stackDetails) {
    const clonedResponse &#x3D; cloneDeep(response);
    const {
      artifactVersion,
      blueprintVersion,
      overrideVersion,
      resourceStatus,
    } &#x3D; clonedResponse;

    const artifactVersions &#x3D; artifactVersion?.versions?.map(
      (version, index) &#x3D;&gt; ({
        ...version,
        ...version?.entity,
        versionId: version?.id,
        state: this.getStatus({
          liveVersionId: artifactVersion?.liveVersionId,
          previewVersionId: artifactVersion?.previewVersionId,
          version,
          index,
          resourceStatus,
        }),
        index,
      }),
    );

    const blueprintVersions &#x3D; blueprintVersion?.versions?.map(
      (version, index) &#x3D;&gt; ({
        ...version,
        ...version?.entity,
        ...version?.entity?.commitLog,
        versionId: version?.id,
        commitUrl: stackDetails
          ? getCommitUrl(
              stackDetails.vcsUrl,
              stackDetails?.vcs,
              version?.entity?.commitLog?.commitId,
            )
          : version?.entity?.commitLog?.commitId,
        vcsUrl: stackDetails?.vcsUrl,
        vcs: stackDetails?.vcs,
        state: this.getStatus({
          liveVersionId: blueprintVersion?.liveVersionId,
          previewVersionId: blueprintVersion?.previewVersionId,
          version,
          index,
          resourceStatus,
        }),
        index,
      }),
    );

    const overrideVersions &#x3D; overrideVersion?.versions?.map(
      (version, index) &#x3D;&gt; ({
        ...version,
        versionId: version?.id,
        ...version?.entity,
        state: this.getStatus({
          liveVersionId: overrideVersion?.liveVersionId,
          previewVersionId: overrideVersion?.previewVersionId,
          version,
          index,
          resourceStatus,
        }),
        index,
      }),
    );

    const artifactData &#x3D; artifactVersion
      ? {
          ...(artifactVersion || {}),
          versions: artifactVersions,
        }
      : {};

    const blueprintData &#x3D; blueprintVersion
      ? {
          ...(blueprintVersion || {}),
          versions: blueprintVersions,
        }
      : {};

    const overrideData &#x3D; overrideVersion
      ? {
          ...(overrideVersion || {}),
          versions: overrideVersions,
        }
      : {};

    return {
      artifactData,
      blueprintData,
      overrideData,
      resourceStatus,
    };
  }

  private getStatus({
    liveVersionId,
    previewVersionId,
    version,
    index,
    resourceStatus,
  }) {
    // For legacy modules, if the resource is disabled then we will not know if the resource is deployed or not, hence not showing live/queued status.
    if (
      (!this.resourceDetailsService?.isAlphaModule() ||
        this.resourceDetailsService?.isSubstackResource()) &amp;&amp;
      resourceStatus !&#x3D;&#x3D; &#x27;RUNNING&#x27;
    ) {
      return &#x27;&#x27;;
    }

    if (version?.id &#x3D;&#x3D;&#x3D; liveVersionId) {
      return &#x27;live&#x27;;
    }

    if (version?.id &#x3D;&#x3D;&#x3D; previewVersionId) {
      return &#x27;preview&#x27;;
    }

    if (
      index &#x3D;&#x3D;&#x3D; 0 &amp;&amp;
      version?.id !&#x3D;&#x3D; liveVersionId &amp;&amp;
      version?.id !&#x3D;&#x3D; previewVersionId
    ) {
      return &#x27;queued&#x27;;
    }

    return &#x27;&#x27;;
  }

  private getStackDetailsByName({ blueprintName }) {
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.uiStackControllerService.getStackUsingGET(blueprintName).subscribe(
        (res) &#x3D;&gt; {
          resolve(res);
        },
        (error) &#x3D;&gt; {
          reject(error);
        },
      );
    });
  }

  private openTab(rowData) {
    window.open(
      getCommitUrl(rowData?.vcsUrl, rowData?.vcs, rowData?.commitId),
      &#x27;_blank&#x27;,
    );
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ResourceHistoryService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
